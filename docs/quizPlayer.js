(()=>{"use strict";const e="quizAttemptsKey",t=e=>`attempt_${e}`;((n,r,o,s)=>{const a=new URLSearchParams(window.location.search);document.querySelector(".loader").style.display="flex",fetch("https://quizapi.io/api/v1/questions?"+a+"&apiKey=XfmoMXBSZXf8L0EYCw07KLemXxghZ4BOJL0O4sMj").then((e=>(document.querySelector(".loader").style.display="none",e.json()))).then((n=>{(n=>{if(n.error)return;const r=document.querySelector("#player");n.forEach((e=>{const t=function(e){const t=document.createElement("fieldset"),n=document.createElement("legend"),r=document.createTextNode(e.question);return n.appendChild(r),t.appendChild(n),Object.entries(e.answers).forEach((([n,r])=>{if(!r)return;const o=document.createElement("div");o.classList.add("answerGroup");const s=document.createElement("label");s.setAttribute("for",e.id+n),s.classList.add("radioAnswer");const a=document.createElement("input");a.setAttribute("type","radio"),a.setAttribute("id",e.id+n),a.setAttribute("name",e.id),a.setAttribute("title",r),a.value=n,s.innerText=r,o.appendChild(a),o.appendChild(s),t.appendChild(o)})),t}(e);r.appendChild(t)}));const o=document.createElement("button");o.setAttribute("type","submit"),o.textContent="Submit";const s=document.querySelector("form");r.appendChild(o),s.addEventListener("submit",(function(r){r.preventDefault();const o=(s=new FormData(r.target),Object.fromEntries(s));var s;(function(n,r){const o={noOfQuestions:n.length,correctAnswers:0,wrongAnswers:0,notTaken:0,date:new Date};((n,r)=>{console.log("quizItems: ",n);let o=localStorage.getItem(e);if(o){o=JSON.parse(o);const s=t(o?.order?.length+1||1);o.details[s]={quizItems:n,baseAnalytics:r},o.order.push(s),localStorage.setItem(e,JSON.stringify(o))}else{const o={details:{},order:[]},s=t(1);o.details={[s]:{quizItems:n,baseAnalytics:r}},o.order=[s],console.log({quizAttempts:o}),localStorage.setItem(e,JSON.stringify(o))}localStorage.getItem(e)})(n.map(((e,t)=>{let s=0;return e.correct_answer===r[e.id]?(o.correctAnswers+=1,s=1):r[e.id]?(o.wrongAnswers+=1,s=2):(o.notTaken+=1,s=0),{...n[t],quizStatus:s}})),o)})(n,o),window.location.replace("/analytics.html")}))})(n)})).catch((e=>{document.querySelector(".error").style.display="flex",console.log("Error : ",e)}))})()})();